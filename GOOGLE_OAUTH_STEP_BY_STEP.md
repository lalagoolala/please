# 📸 Google OAuth 설정 - 스크린샷 단계별 가이드

## 🚨 현재 오류 상황
```
400 오류: redirect_uri_mismatch
이 앱에서 잘못된 요청이 들어왔습니다.
```

---

## 🔧 해결 방법 (7단계)

### 1단계: Google Cloud Console 열기
```
👉 https://console.cloud.google.com
```

### 2단계: 프로젝트 선택
- 상단에서 현재 프로젝트 선택
- 아직 프로젝트가 없으면 새로 생성

### 3단계: 사용자 인증 정보 메뉴
```
왼쪽 메뉴:
[▼] APIs 및 서비스
    └─ [사용자 인증 정보] ← 여기 클릭!
```

### 4단계: OAuth 클라이언트 ID 찾기
```
OAuth 2.0 클라이언트 ID 섹션에서
"웹 애플리케이션" 항목을 찾아 클릭
(없으면 + 사용자 인증 정보 만들기 → OAuth 2.0 클라이언트 ID 선택)
```

### 5단계: 승인된 JavaScript 원본 추가 ⭐ (CRITICAL)
```
현재 항목: [빈칸]
            [+ ADD URI] 버튼

다음을 모두 추가:
┌─────────────────────────────┐
│ http://localhost:8000       │ ← 추가
├─────────────────────────────┤
│ http://127.0.0.1:8000       │ ← 추가
├─────────────────────────────┤
│ http://localhost:3000       │ ← 추가
├─────────────────────────────┤
│ http://127.0.0.1:3000       │ ← 추가
├─────────────────────────────┤
│ http://localhost:5000       │ ← 추가
├─────────────────────────────┤
│ http://127.0.0.1:5000       │ ← 추가
└─────────────────────────────┘
```

### 6단계: 승인된 리디렉션 URI 추가 ⭐ (CRITICAL)
```
Authorized redirect URIs 섹션에도
같은 URL들을 추가 (끝에 "/" 포함):

http://localhost:8000/
http://127.0.0.1:8000/
http://localhost:3000/
http://127.0.0.1:3000/
http://localhost:5000/
http://127.0.0.1:5000/
```

### 7단계: 저장 및 테스트
```
[저장] 버튼 클릭
    ↓
브라우저 캐시 삭제 (Ctrl+Shift+Delete)
    ↓
페이지 새로고침 (Ctrl+F5)
    ↓
Google 로그인 버튼 클릭
    ↓
✅ Google 계정 선택 화면이 나타나면 성공!
```

---

## 📋 체크리스트

### Google Cloud Console 설정
- [ ] Google Cloud Console 접속
- [ ] OAuth 2.0 클라이언트 ID 찾음
- [ ] 승인된 JavaScript 원본에 localhost:8000 추가
- [ ] 승인된 JavaScript 원본에 127.0.0.1:8000 추가
- [ ] 승인된 리디렉션 URI에 http://localhost:8000/ 추가
- [ ] 승인된 리디렉션 URI에 http://127.0.0.1:8000/ 추가
- [ ] 저장 버튼 클릭

### 브라우저 설정
- [ ] Ctrl+Shift+Delete로 캐시 삭제
- [ ] Ctrl+F5로 강력 새로고침
- [ ] 개발자 도구 (F12) 콘솔에서 에러 확인

### 테스트
- [ ] http://localhost:8000 또는 http://127.0.0.1:8000 접속
- [ ] Google 로그인 버튼 클릭
- [ ] Google 계정 선택 화면이 나타남 (오류 아님)
- [ ] 계정 선택 후 계정 유형 선택 모달 나타남
- [ ] "가입 완료" 후 자동 로그인 성공

---

## 🎯 내가 현재 사용 중인 포트 확인

터미널에서 실행 중인 명령어 확인:

```bash
# Python http.server를 시작할 때
python -m http.server 8000

# 출력: Serving HTTP on 0.0.0.0 port 8000
#       ↑                                  ↑
#       포트 번호가 여기 표시됨
```

**내 포트**: `________` (위의 숫자를 적기)

만약 다른 포트라면 (예: 3000, 5000):
```
해당 포트를 Google Console에도 추가해야 합니다!
예) http://localhost:3000
    http://127.0.0.1:3000
```

---

## ❓ 아직도 안 되면?

### 1단계: 콘솔 에러 확인
```
F12 → 콘솔 탭 → 빨간 에러 메시지 확인
```

### 2단계: 포트 변경 후 재시도
```bash
# 기존 포트 (예: 8000) 종료 (Ctrl+C)
# 다른 포트로 시작
python -m http.server 3000

# 그 후 http://localhost:3000 접속
# Google Console에도 3000 포트 추가
```

### 3단계: 완전 새로 생성
```
Google Console에서:
1. 기존 Client ID 삭제
2. 새로운 클라이언트 ID 생성
3. localhost URI 먼저 등록한 후 생성
4. 새 Client ID를 index.html에 업데이트
```

---

## 📝 Client ID 업데이트 (선택사항)

새로운 Client ID를 받았다면:

```javascript
// index.html 약 1445줄 근처에서

const CLIENT_ID = "새로운_CLIENT_ID_를_여기에_붙여넣기.apps.googleusercontent.com";
```

---

## 🎉 성공 확인

✅ Google 로그인 버튼 클릭
    ↓
✅ 오류 메시지 없이 Google 계정 선택 화면 표시
    ↓
✅ Google 계정 선택
    ↓
✅ 계정 유형 선택 모달 나타남 (학생/학부모/관리자)
    ↓
✅ "가입 완료" 클릭
    ↓
✅ 자동 로그인 + 사용자명 표시
    ↓
✅ 로그아웃 버튼이 네비게이션 바에 보임

---

**문제 해결 팁**: 이 문서를 보면서 설정하면 대부분 성공합니다! 😊
