<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5í•™ë…„ ë³´ê±´ìˆ˜ì—…</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua:wght@400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        * {
            font-family: 'Noto Sans KR', 'Jua', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 0;
        }

        .navbar {
            background: linear-gradient(90deg, #ff6b6b 0%, #ff8c42 50%, #ffd93d 100%);
            padding: 1rem 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .navbar-brand {
            font-size: 1.8rem;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .nav-links {
            display: flex;
            gap: 1rem;
            list-style: none;
            flex-wrap: wrap;
        }

        .nav-links a,
        .nav-links button {
            color: white;
            text-decoration: none;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            background: transparent;
            transition: all 0.3s;
            font-size: 0.95rem;
        }

        .nav-links a:hover,
        .nav-links button:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .container {
            background-color: white;
            border-radius: 20px;
            padding: 40px;
            margin: 30px auto;
            max-width: 1000px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        h1 {
            color: #ff6b6b;
            font-size: 3rem;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(255, 107, 107, 0.2);
        }

        .lead {
            text-align: center;
            font-size: 1.3rem;
            color: #666;
            margin-bottom: 30px;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
            color: white;
            font-size: 1.1rem;
        }

        .alert-info {
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .alert-success {
            background: linear-gradient(90deg, #11998e, #38ef7d);
        }

        .card-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }

        .card {
            border: none;
            border-radius: 15px;
            padding: 30px;
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #ff6b6b;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .card.qna {
            border-left-color: #667eea;
        }

        .card-title {
            font-size: 1.5rem;
            color: #ff6b6b;
            margin-bottom: 10px;
        }

        .card.qna .card-title {
            color: #667eea;
        }

        .card-text {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 20px;
        }

        .edit-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            display: none;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(90deg, #ff6b6b, #ff8c42);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
        }

        .tips {
            background: linear-gradient(135deg, #e0f7ff 0%, #d4f1f9 100%);
            border-left: 5px solid #3498db;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            position: relative;
        }

        .tips h4 {
            color: #2c3e50;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .tips ul {
            list-style: none;
            color: #555;
            font-size: 1rem;
            line-height: 1.8;
        }

        .tips li:before {
            content: "âœ“ ";
            color: #3498db;
            font-weight: bold;
            margin-right: 8px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border: none;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            max-height: 90vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #ff6b6b;
            font-weight: bold;
        }

        input,
        textarea,
        select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ff6b6b;
            border-radius: 10px;
            font-family: inherit;
            font-size: 1rem;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 5px rgba(102, 126, 234, 0.3);
        }

        .post-item {
            border-bottom: 1px solid #eee;
            padding: 15px 0;
        }

        .post-item:last-child {
            border-bottom: none;
        }

        .post-title {
            color: #ff6b6b;
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .post-author {
            color: #999;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .post-content {
            color: #555;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .comment {
            background: #f9f9f9;
            border-left: 3px solid #667eea;
            padding: 10px;
            margin: 10px 0 10px 20px;
            border-radius: 5px;
            font-size: 0.95rem;
        }

        .comment-author {
            color: #667eea;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .comment-text {
            color: #555;
            margin-top: 5px;
        }

        .approval-list {
            border: 1px solid #eee;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .approval-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .approval-item:last-child {
            border-bottom: none;
        }

        .approval-info {
            flex: 1;
        }

        .approval-name {
            font-weight: bold;
            color: #333;
        }

        .approval-email {
            color: #999;
            font-size: 0.9rem;
        }

        .approval-type {
            background: #667eea;
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 0.8rem;
            margin-left: 10px;
        }

        .approval-actions {
            gap: 10px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.85rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 5px;
        }

        .btn-approve {
            background: #11998e;
            color: white;
        }

        .btn-reject {
            background: #e74c3c;
            color: white;
        }

        .hidden {
            display: none;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
        }

        .tab-btn {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: bold;
            color: #999;
            border-bottom: 3px solid transparent;
        }

        .tab-btn.active {
            color: #ff6b6b;
            border-bottom-color: #ff6b6b;
        }

        .radio-group {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 10px 0;
        }

        .radio-group label {
            display: flex;
            align-items: center;
            margin-bottom: 0;
            cursor: pointer;
        }

        .radio-group input[type="radio"] {
            width: auto;
            margin-right: 10px;
            border: none;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .card-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2rem;
            }

            .navbar {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <div class="navbar-brand">ğŸ¥ 5í•™ë…„ ë³´ê±´êµì‹¤</div>
        <ul class="nav-links">
            <li><a href="#" onclick="showHome()">ğŸ  í™ˆ</a></li>
            <li id="adminMenuLink" class="hidden"><a href="#" onclick="showAdminPanel()">âš™ï¸ ê´€ë¦¬</a></li>
            <li><a href="#" onclick="showQNA()">â“ ì§ˆì˜ì‘ë‹µ</a></li>
            <li id="userMenu" class="hidden">
                <span id="userName"></span>
                <button onclick="openDeleteAccountModal()" style="background: rgba(255,255,255,0.3); margin-left: 10px;">ğŸ—‘ï¸ íšŒì›íƒˆí‡´</button>
                <button onclick="logout()" style="background: rgba(255,255,255,0.3); margin-left: 5px;">ğŸšª ë¡œê·¸ì•„ì›ƒ</button>
            </li>
            <li id="authMenu">
                <button onclick="openLoginModal()">ğŸ” ë¡œê·¸ì¸</button>
                <button onclick="openSignupModal()">ğŸ“ íšŒì›ê°€ì…</button>
            </li>
        </ul>
    </nav>

    <div class="container" id="mainContent">
        <div style="text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 20px;">ğŸ¥</div>
            <h1>í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‘‹</h1>
            <p class="lead">ìš°ë¦¬ë“¤ì˜ ê±´ê°•ì„ ì§€í‚¤ëŠ” 5í•™ë…„ ë³´ê±´ìˆ˜ì—… í™ˆí˜ì´ì§€ì…ë‹ˆë‹¤.</p>
            <hr style="border: 2px solid #ff6b6b; margin: 20px 0;">

            <div id="welcomeMsg" class="alert alert-info">
                ğŸ‰ ë¡œê·¸ì¸í•˜ê³  ë³´ê±´ìˆ˜ì—…ì— ì°¸ì—¬í•˜ì„¸ìš”!
            </div>

            <div class="card-grid">
                <div class="card" onclick="showNotice()">
                    <button class="edit-btn" id="editNoticeBtn" onclick="openEditNoticeModal(event)">ìˆ˜ì •</button>
                    <h5 class="card-title">ğŸ“¢ ê³µì§€ì‚¬í•­</h5>
                    <p class="card-text" id="noticePreview">ì„ ìƒë‹˜ì˜ ì¤‘ìš”í•œ ê³µì§€ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”. ê±´ê°• ê´€ë ¨ ì†Œì‹ê³¼ í•™ìŠµ ì •ë³´ê°€ ì—¬ê¸° ìˆìŠµë‹ˆë‹¤!</p>
                    <button class="btn btn-primary">ê³µì§€ì‚¬í•­ ë³´ê¸°</button>
                </div>

                <div class="card qna" onclick="showQNA()">
                    <h5 class="card-title">â“ ì§ˆì˜ì‘ë‹µ</h5>
                    <p class="card-text">ë³´ê±´ ì„ ìƒë‹˜ê»˜ ê±´ê°•ì— ëŒ€í•´ ë¬¼ì–´ë³´ì„¸ìš”. ëª¨ë“  ì§ˆë¬¸ì„ í™˜ì˜í•©ë‹ˆë‹¤!</p>
                    <button class="btn btn-secondary">ì§ˆë¬¸í•˜ëŸ¬ ê°€ê¸°</button>
                </div>
            </div>

            <div class="card-grid" style="grid-template-columns: repeat(3, 1fr);">
                <div class="card" style="border-left-color: #11998e;">
                    <button class="edit-btn" id="editWashBtn" onclick="openEditHealthModal(event, 'wash')">ìˆ˜ì •</button>
                    <div style="font-size: 2.5rem; margin-bottom: 10px;">ğŸ§¼</div>
                    <h5 class="card-title" style="color: #11998e;">ì† ì”»ê¸°</h5>
                    <p class="card-text" id="washContent">ì§ˆë³‘ ì˜ˆë°©ì˜ ì²« ë²ˆì§¸ ë‹¨ê³„ëŠ” ê¹¨ë—í•œ ì† ì”»ê¸°ì…ë‹ˆë‹¤!</p>
                </div>

                <div class="card" style="border-left-color: #ffa502;">
                    <button class="edit-btn" id="editNutritionBtn"
                        onclick="openEditHealthModal(event, 'nutrition')">ìˆ˜ì •</button>
                    <div style="font-size: 2.5rem; margin-bottom: 10px;">ğŸ¥—</div>
                    <h5 class="card-title" style="color: #ffa502;">ì˜ì–‘ ê´€ë¦¬</h5>
                    <p class="card-text" id="nutritionContent">ê· í˜• ì¡íŒ ì‹ë‹¨ì€ ê±´ê°•í•œ ì„±ì¥ì˜ ê¸°ë³¸ì…ë‹ˆë‹¤!</p>
                </div>

                <div class="card" style="border-left-color: #3498db;">
                    <button class="edit-btn" id="editExerciseBtn"
                        onclick="openEditHealthModal(event, 'exercise')">ìˆ˜ì •</button>
                    <div style="font-size: 2.5rem; margin-bottom: 10px;">ğŸƒ</div>
                    <h5 class="card-title" style="color: #3498db;">ìš´ë™ê³¼ íœ´ì‹</h5>
                    <p class="card-text" id="exerciseContent">ì ì ˆí•œ ìš´ë™ê³¼ íœ´ì‹ì€ ê±´ê°•í•œ ìƒí™œì˜ í•„ìˆ˜ìš”ì†Œì…ë‹ˆë‹¤!</p>
                </div>
            </div>

            <div class="tips">
                <h4>ğŸ’¡ ê±´ê°• ìƒí™œì˜ íŒ</h4>
                <ul>
                    <li>ë§¤ì¼ 8ì‹œê°„ ì´ìƒì˜ ì¶©ë¶„í•œ ìˆ˜ë©´ì„ ì·¨í•˜ì„¸ìš”</li>
                    <li>í•˜ë£¨ì— ë¬¼ì„ 6-8ì” ë§ˆì…” ìˆ˜ë¶„ì„ ìœ ì§€í•˜ì„¸ìš”</li>
                    <li>ë§¤ì¼ 30ë¶„ ì´ìƒ ìš´ë™í•˜ì„¸ìš”</li>
                    <li>ì•½ 1ì‹œê°„ë§ˆë‹¤ ëˆˆì„ ì‰¬ê²Œ í•´ì£¼ì„¸ìš”</li>
                    <li>ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í’€ê¸° ìœ„í•´ ì¢‹ì•„í•˜ëŠ” í™œë™ì„ í•˜ì„¸ìš”</li>
                </ul>
            </div>

            <div id="startSection" class="card"
                style="border-left-color: #ff8c42; background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); color: white; margin-top: 30px;">
                <h3 style="color: #ff8c42; margin-bottom: 15px;">ğŸš€ ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•´ë³´ì„¸ìš”!</h3>
                <p style="color: #555; margin-bottom: 20px; font-size: 1.1rem;">ë¡œê·¸ì¸í•˜ê³  ë³´ê±´ìˆ˜ì—…ì— ë” ì ê·¹ì ìœ¼ë¡œ ì°¸ì—¬í•´ë³´ì„¸ìš”!</p>
                <button class="btn"
                    style="background: linear-gradient(90deg, #ff8c42, #ffd93d); color: white; margin-right: 10px;"
                    onclick="openSignupModal()">ğŸ“ íšŒì›ê°€ì…</button>
                <button class="btn" style="background: white; color: #ff8c42; border: 2px solid #ff8c42;"
                    onclick="openLoginModal()">ğŸ” ë¡œê·¸ì¸</button>
            </div>
        </div>
    </div>

    <!-- ê³µì§€ì‚¬í•­ í˜ì´ì§€ -->
    <div id="noticePage" class="hidden container">
        <h1>ğŸ“¢ ê³µì§€ì‚¬í•­</h1>
        <div id="noticeList"></div>
    </div>

    <!-- ì§ˆì˜ì‘ë‹µ í˜ì´ì§€ -->
    <div id="qnaPage" class="hidden container">
        <h1>â“ ì§ˆì˜ì‘ë‹µ</h1>
        <button id="qnaPostBtn" class="btn btn-primary" onclick="openPostModal('qna')"
            style="display: none; margin-bottom: 20px;">âœï¸ ì§ˆë¬¸ ì‘ì„±</button>
        <div id="qnaList"></div>
    </div>

    <!-- ê´€ë¦¬ì íŒ¨ë„ -->
    <div id="adminPanel" class="hidden container">
        <h1>âš™ï¸ ê´€ë¦¬ì íŒ¨ë„</h1>
        <div class="tabs">
            <button class="tab-btn active" onclick="switchAdminTab('approval')">íšŒì›ê°€ì… ìŠ¹ì¸</button>
                <button class="tab-btn" onclick="switchAdminTab('users')">íšŒì› ê´€ë¦¬</button>
                <button class="tab-btn" onclick="switchAdminTab('content')">ì½˜í…ì¸  í¸ì§‘</button>
            </div>

            <!-- íšŒì›ê°€ì… ìŠ¹ì¸ íƒ­ -->
            <div id="approvalTab">
                <h2 style="color: #ff6b6b; margin-bottom: 20px;">ëŒ€ê¸° ì¤‘ì¸ íšŒì›ê°€ì…</h2>
                <div id="pendingList" class="approval-list"></div>
            </div>

            <!-- íšŒì› ê´€ë¦¬ íƒ­ -->
            <div id="usersTab" style="display: none;">
                <h2 style="color: #ff6b6b; margin-bottom: 20px;">ê°€ì… íšŒì› ëª©ë¡</h2>
                <div id="usersList" class="approval-list"></div>
            <p style="color: #666; margin-bottom: 20px;">í™ˆí˜ì´ì§€ì˜ ì£¼ìš” ì½˜í…ì¸ ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>
    </div>

    <!-- ë¡œê·¸ì¸ ëª¨ë‹¬ -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLoginModal()">&times;</span>
            <h2>ğŸ” ë¡œê·¸ì¸</h2>
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>ğŸ“§ ì´ë©”ì¼ ë˜ëŠ” ì•„ì´ë””</label>
                    <input type="text" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label>ğŸ”‘ ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;">ë¡œê·¸ì¸</button>
            </form>
            <div style="margin: 20px 0; text-align: center; position: relative;">
                <hr style="border: 0; border-top: 1px solid #eee;">
                <span
                    style="position: absolute; top: -10px; left: 50%; transform: translateX(-50%); background: white; padding: 0 10px; color: #999; font-size: 0.8rem;">ë˜ëŠ”</span>
            </div>
            <div id="googleLoginBtn" style="display: flex; justify-content: center;"></div>
            <hr style="margin: 20px 0;">
            <p style="text-align: center; color: #666;">ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <button
                    onclick="closeLoginModal(); openSignupModal();"
                    style="background: none; border: none; color: #ff6b6b; font-weight: bold; cursor: pointer;">íšŒì›ê°€ì…í•˜ê¸°</button>
            </p>
        </div>
    </div>

    <!-- íšŒì›ê°€ì… ëª¨ë‹¬ -->
    <div id="signupModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSignupModal()">&times;</span>
            <h2>ğŸ“ íšŒì›ê°€ì…</h2>
            <form onsubmit="handleSignup(event)">
                <div class="form-group">
                    <label>ğŸ‘¤ ì´ë¦„</label>
                    <input type="text" id="signupName" required>
                </div>
                <div class="form-group">
                    <label>ğŸ“§ ì´ë©”ì¼</label>
                    <input type="email" id="signupEmail" required>
                </div>
                <div class="form-group">
                    <label>ğŸ‘¥ ê³„ì • ìœ í˜•</label>
                    <div class="radio-group">
                        <label><input type="radio" name="accountType" value="student" required
                                onchange="updateStudentField()"> ğŸ“ í•™ìƒ</label>
                        <label><input type="radio" name="accountType" value="parent" required
                                onchange="updateStudentField()"> ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ í•™ë¶€ëª¨</label>
                        <label><input type="radio" name="accountType" value="admin" required
                                onchange="updateStudentField()"> ğŸ‘‘ ê´€ë¦¬ì</label>
                    </div>
                </div>
                <div class="form-group" id="studentField" style="display: none;">
                    <label>ğŸ“š í•™ë…„ ë°˜ ë²ˆí˜¸</label>
                    <input type="text" id="signupStudent" placeholder="ì˜ˆ: 5í•™ë…„ 1ë°˜ 10ë²ˆ">
                </div>
                <div class="form-group">
                    <label>ğŸ”‘ ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="signupPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;">ê°€ì…ì‹ ì²­</button>
            </form>
            <div style="margin: 20px 0; text-align: center; position: relative;">
                <hr style="border: 0; border-top: 1px solid #eee;">
                <span
                    style="position: absolute; top: -10px; left: 50%; transform: translateX(-50%); background: white; padding: 0 10px; color: #999; font-size: 0.8rem;">ë˜ëŠ”</span>
            </div>
            <div id="googleSignupBtn" style="display: flex; justify-content: center;">
                <button onclick="handleGoogleSignupClick()" type="button"
                    style="display: flex; align-items: center; justify-content: center; width: 100%; padding: 10px; background: white; border: 1px solid #dadce0; border-radius: 4px; color: #3c4043; cursor: pointer; font-family: 'Roboto', arial, sans-serif; font-size: 14px; font-weight: 500; transition: background-color .218s, border-color .218s, box-shadow .218s;">
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="18px" height="18px"
                        viewBox="-3 0 26 24" style="margin-right: 10px;">
                        <path fill="#4285F4"
                            d="M19 12.2c0-.6-.1-1.2-.2-1.8H10v3.4h5.1c-.2 1.2-.9 2.1-2 2.8v2.3h3.2c1.9-1.8 3-4.3 3-6.7z">
                        </path>
                        <path fill="#34A853"
                            d="M10 20c2.7 0 5-1 6.7-2.6l-3.2-2.3c-.9.6-2.1 1-3.5 1-2.6 0-4.8-1.8-5.6-4.2H1.2v2.5C2.9 17.8 6.2 20 10 20z">
                        </path>
                        <path fill="#FBBC05"
                            d="M4.4 11.9c-.2-.6-.2-1.3 0-2V7.4H1.2C.4 8.9 0 10.4 0 12s.4 3.1 1.2 4.6l3.2-2.5c-.2-.6-.2-1.2 0-2.2z">
                        </path>
                        <path fill="#EA4335"
                            d="M10 4.4c1.5 0 2.8.5 3.9 1.5l2.9-2.9C15 1.7 12.7 0 10 0 6.2 0 2.9 2.2 1.2 5.5l3.2 2.5c.8-2.4 3-4.1 5.6-4.1z">
                        </path>
                    </svg>
                    Google ê³„ì •ìœ¼ë¡œ íšŒì›ê°€ì…
                </button>
            </div>
        </div>
    </div>

    <!-- ê²Œì‹œë¬¼ ì‘ì„± ëª¨ë‹¬ -->
    <div id="postModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePostModal()">&times;</span>
            <h2 id="postModalTitle">ì§ˆë¬¸ ì‘ì„±</h2>
            <form onsubmit="handlePostSubmit(event)">
                <div class="form-group">
                    <label>ì œëª©</label>
                    <input type="text" id="postTitle" required>
                </div>
                <div class="form-group">
                    <label>ë‚´ìš©</label>
                    <textarea id="postContent" rows="5" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;">ì‘ì„±</button>
            </form>
        </div>
    </div>

    <!-- ëŒ“ê¸€ ì‘ì„± ëª¨ë‹¬ -->
    <div id="commentModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeCommentModal()">&times;</span>
            <h2>ğŸ’¬ ëŒ“ê¸€ ì‘ì„±</h2>
            <form onsubmit="handleCommentSubmit(event)">
                <div class="form-group">
                    <label>ëŒ“ê¸€</label>
                    <textarea id="commentText" rows="3" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;">ëŒ“ê¸€ ì‘ì„±</button>
            </form>
        </div>
    </div>

    <!-- ê³µì§€ì‚¬í•­ ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="editNoticeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditNoticeModal()">&times;</span>
            <h2>ğŸ“¢ ê³µì§€ì‚¬í•­ ìˆ˜ì •</h2>
            <form onsubmit="handleEditNotice(event)">
                <div class="form-group">
                    <label>ì œëª©</label>
                    <input type="text" id="editNoticeTitle" required>
                </div>
                <div class="form-group">
                    <label>ë‚´ìš©</label>
                    <textarea id="editNoticeContent" rows="5" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;">ì €ì¥</button>
            </form>
        </div>
    </div>

    <!-- ê±´ê°• ì •ë³´ ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="editHealthModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditHealthModal()">&times;</span>
            <h2 id="editHealthTitle">ë‚´ìš© ìˆ˜ì •</h2>
            <form onsubmit="handleEditHealth(event)">
                <div class="form-group">
                    <label>ë‚´ìš©</label>
                    <textarea id="editHealthContent" rows="5" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;">ì €ì¥</button>
            </form>
        </div>
    </div>

    <!-- êµ¬ê¸€ ê°€ì… ìœ í˜• ì„ íƒ ëª¨ë‹¬ -->
    <div id="googleTypeModal" class="modal">
        <div class="modal-content">
            <h2>ğŸ‘¥ ê³„ì • ìœ í˜• ì„ íƒ</h2>
            <p style="margin-bottom: 20px; color: #666;">Google ê³„ì •ìœ¼ë¡œ ì²˜ìŒ ê°€ì…í•˜ì…¨ìŠµë‹ˆë‹¤. ì‚¬ìš©í•˜ì‹¤ ê³„ì • ìœ í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
            <div class="radio-group">
                <label><input type="radio" name="googleAccountType" value="student" checked> ğŸ“ í•™ìƒ</label>
                <label><input type="radio" name="googleAccountType" value="parent"> ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ í•™ë¶€ëª¨</label>
                <label><input type="radio" name="googleAccountType" value="admin"> ğŸ‘‘ ê´€ë¦¬ì</label>
            </div>
            <button onclick="submitGoogleSignup()" class="btn btn-primary" style="width: 100%; margin-top: 20px;">ê°€ì…
                ì™„ë£Œ</button>
        </div>
    </div>

    <!-- íšŒì›íƒˆí‡´ í™•ì¸ ëª¨ë‹¬ -->
    <div id="deleteAccountModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeDeleteAccountModal()">&times;</span>
            <h2 style="color: #e74c3c;">ğŸ—‘ï¸ íšŒì›íƒˆí‡´</h2>
            <p style="margin: 20px 0; color: #666; font-size: 1.1rem;">ì •ë§ë¡œ íšŒì›íƒˆí‡´ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <p style="margin: 15px 0; color: #999; font-size: 0.95rem;">âš ï¸ íšŒì›íƒˆí‡´ í›„ì—ëŠ” ê³„ì •ì„ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
            <div style="display: flex; gap: 10px; margin-top: 30px;">
                <button onclick="confirmDeleteAccount()" class="btn" style="background: #e74c3c; color: white; flex: 1;">í™•ì¸ - íšŒì›íƒˆí‡´</button>
                <button onclick="closeDeleteAccountModal()" class="btn" style="background: #95a5a6; color: white; flex: 1;">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <script>
        // ========== ë°ì´í„° ì´ˆê¸°í™” ==========
        const initStorage = () => {
            // ê´€ë¦¬ì ê³„ì • ë¯¸ë¦¬ ìƒì„±
            if (!localStorage.getItem('users')) {
                const adminUser = {
                    id: 1,
                    name: 'ë³´ê±´ì„ ìƒë‹˜',
                    email: 'admin@health.com',
                    userId: 'abc',
                    password: '1234',
                    type: 'admin',
                    status: 'approved'
                };
                localStorage.setItem('users', JSON.stringify([adminUser]));
            }

            // ëŒ€ê¸° ì¤‘ì¸ íšŒì›
            if (!localStorage.getItem('pendingUsers')) {
                localStorage.setItem('pendingUsers', JSON.stringify([]));
            }

            // ê³µì§€ì‚¬í•­
            if (!localStorage.getItem('notice')) {
                localStorage.setItem('notice', JSON.stringify({
                    title: 'ê±´ê°• ìŠµê´€ ì±Œë¦°ì§€',
                    content: 'ì´ë²ˆ ë‹¬ë¶€í„° ê±´ê°• ìŠµê´€ ì±Œë¦°ì§€ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤! ì† ì”»ê¸°, ìš´ë™, ì¶©ë¶„í•œ ìˆ˜ë©´ ë“±ì„ ì‹¤ì²œí•´ë³´ì„¸ìš”!'
                }));
            }

            // ê±´ê°• ì •ë³´
            if (!localStorage.getItem('healthInfo')) {
                localStorage.setItem('healthInfo', JSON.stringify({
                    wash: 'ì§ˆë³‘ ì˜ˆë°©ì˜ ì²« ë²ˆì§¸ ë‹¨ê³„ëŠ” ê¹¨ë—í•œ ì† ì”»ê¸°ì…ë‹ˆë‹¤! ë¹„ëˆ„ë¥¼ ì‚¬ìš©í•˜ì—¬ 20ì´ˆ ì´ìƒ ì†ì„ ì”»ì–´ì•¼ í•©ë‹ˆë‹¤.',
                    nutrition: 'ê· í˜• ì¡íŒ ì‹ë‹¨ì€ ê±´ê°•í•œ ì„±ì¥ì˜ ê¸°ë³¸ì…ë‹ˆë‹¤! íƒ„ìˆ˜í™”ë¬¼, ë‹¨ë°±ì§ˆ, ì§€ë°©ì„ ê³¨ê³ ë£¨ ì„­ì·¨í•˜ì„¸ìš”.',
                    exercise: 'ì ì ˆí•œ ìš´ë™ê³¼ íœ´ì‹ì€ ê±´ê°•í•œ ìƒí™œì˜ í•„ìˆ˜ìš”ì†Œì…ë‹ˆë‹¤! ë§¤ì¼ 1ì‹œê°„ ì´ìƒ ìš´ë™í•˜ê³  ì¶©ë¶„íˆ ì‰¬ì„¸ìš”.'
                }));
            }

            // ì§ˆì˜ì‘ë‹µ
            if (!localStorage.getItem('qnaList')) {
                localStorage.setItem('qnaList', JSON.stringify([]));
            }
        };

        initStorage();

        // ========== ì‚¬ìš©ì ìƒíƒœ ==========
        let currentUser = localStorage.getItem('currentUser') ? JSON.parse(localStorage.getItem('currentUser')) : null;
        let currentPostId = null;
        let currentHealthType = null;

        // ========== UI ì—…ë°ì´íŠ¸ ==========
        const updateUI = () => {
            const userMenu = document.getElementById('userMenu');
            const authMenu = document.getElementById('authMenu');
            const adminLink = document.getElementById('adminMenuLink');
            const startSection = document.getElementById('startSection');
            const welcomeMsg = document.getElementById('welcomeMsg');
            const qnaPostBtn = document.getElementById('qnaPostBtn');
            const editButtons = document.querySelectorAll('.edit-btn');

            if (currentUser) {
                userMenu.classList.remove('hidden');
                authMenu.classList.add('hidden');

                const typeBadge = {
                    'admin': 'ğŸ‘‘ (ê´€ë¦¬ì)',
                    'student': 'ğŸ‘¤ (í•™ìƒ)',
                    'parent': 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ (í•™ë¶€ëª¨)'
                }[currentUser.type] || '';

                document.getElementById('userName').textContent = `${currentUser.name}${typeBadge}`;
                startSection.classList.add('hidden');
                welcomeMsg.innerHTML = `âœ¨ <strong>${currentUser.name}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!</strong>`;
                welcomeMsg.className = 'alert alert-success';

                qnaPostBtn.style.display = 'block';

                // ê´€ë¦¬ìë§Œ ê´€ë¦¬ ë©”ë‰´ ë³´ì´ê¸°
                if (currentUser.type === 'admin') {
                    adminLink.classList.remove('hidden');
                    editButtons.forEach(btn => btn.style.display = 'block');
                } else {
                    adminLink.classList.add('hidden');
                    editButtons.forEach(btn => btn.style.display = 'none');
                }
            } else {
                userMenu.classList.add('hidden');
                authMenu.classList.remove('hidden');
                adminLink.classList.add('hidden');
                startSection.classList.remove('hidden');
                qnaPostBtn.style.display = 'none';
                editButtons.forEach(btn => btn.style.display = 'none');
            }
        };

        // ========== ë¡œê·¸ì¸ ==========
        const handleLogin = (e) => {
            e.preventDefault();
            const input = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const users = JSON.parse(localStorage.getItem('users'));

            // ì•„ì´ë”” ë˜ëŠ” ì´ë©”ì¼ë¡œ ë¡œê·¸ì¸
            let user = users.find(u => (u.email === input || u.userId === input) && u.password === password && u.status === 'approved');

            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(user));
                closeLoginModal();
                updateUI();
                alert('ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤!');
            } else {
                alert('ë¡œê·¸ì¸ ì •ë³´ê°€ ì¼ì¹˜í•˜ì§€ ì•Šê±°ë‚˜ ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤.');
            }
        };

        // ========== íšŒì›ê°€ì… ==========
        const updateStudentField = () => {
            const type = document.querySelector('input[name="accountType"]:checked').value;
            const field = document.getElementById('studentField');
            if (type === 'student') {
                field.style.display = 'block';
            } else {
                field.style.display = 'none';
            }
        };

        const handleSignup = (e) => {
            e.preventDefault();
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const type = document.querySelector('input[name="accountType"]:checked').value;
            const password = document.getElementById('signupPassword').value;
            const studentId = type === 'student' ? document.getElementById('signupStudent').value : '';

            const pendingUsers = JSON.parse(localStorage.getItem('pendingUsers'));
            const users = JSON.parse(localStorage.getItem('users'));

            if (users.find(u => u.email === email) || pendingUsers.find(u => u.email === email)) {
                alert('ì´ë¯¸ ê°€ì…ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.');
                return;
            }

            const newUser = {
                id: Date.now(),
                name,
                email,
                userId: email.split('@')[0],
                password,
                type,
                studentId,
                status: 'pending'
            };

            pendingUsers.push(newUser);
            localStorage.setItem('pendingUsers', JSON.stringify(pendingUsers));
            closeSignupModal();
            alert('íšŒì›ê°€ì… ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê´€ë¦¬ì ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.');
            document.querySelector('#signupModal form').reset();
        };

        // ========== ë¡œê·¸ì•„ì›ƒ ==========
        const logout = () => {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateUI();
            showHome();
            alert('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤!');
        };

        // ========== ëª¨ë‹¬ í•¨ìˆ˜ ==========
        const openLoginModal = () => document.getElementById('loginModal').style.display = 'block';
        const closeLoginModal = () => {
            document.getElementById('loginModal').style.display = 'none';
            document.querySelector('#loginModal form').reset();
        };

        const openSignupModal = () => document.getElementById('signupModal').style.display = 'block';
        const closeSignupModal = () => {
            document.getElementById('signupModal').style.display = 'none';
            document.querySelector('#signupModal form').reset();
        };

        const openPostModal = (type) => {
            if (!currentUser) {
                alert('ë¡œê·¸ì¸ í›„ ì´ìš©í•˜ì„¸ìš”.');
                return;
            }
            document.getElementById('postModal').dataset.type = type;
            document.getElementById('postModal').style.display = 'block';
        };

        const closePostModal = () => {
            document.getElementById('postModal').style.display = 'none';
            document.querySelector('#postModal form').reset();
        };

        const openCommentModal = (postId) => {
            if (!currentUser) {
                alert('ë¡œê·¸ì¸ í›„ ì´ìš©í•˜ì„¸ìš”.');
                return;
            }
            currentPostId = postId;
            document.getElementById('commentModal').style.display = 'block';
        };

        const closeCommentModal = () => {
            document.getElementById('commentModal').style.display = 'none';
            document.querySelector('#commentModal form').reset();
            currentPostId = null;
        };

        // ========== ê³µì§€ì‚¬í•­ ìˆ˜ì • ==========
        const openEditNoticeModal = (e) => {
            e.stopPropagation();
            const notice = JSON.parse(localStorage.getItem('notice'));
            document.getElementById('editNoticeTitle').value = notice.title;
            document.getElementById('editNoticeContent').value = notice.content;
            document.getElementById('editNoticeModal').style.display = 'block';
        };

        const closeEditNoticeModal = () => {
            document.getElementById('editNoticeModal').style.display = 'none';
        };

        const handleEditNotice = (e) => {
            e.preventDefault();
            const notice = {
                title: document.getElementById('editNoticeTitle').value,
                content: document.getElementById('editNoticeContent').value
            };
            localStorage.setItem('notice', JSON.stringify(notice));
            document.getElementById('noticePreview').textContent = notice.content;
            closeEditNoticeModal();
            alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        };

        // ========== ê±´ê°• ì •ë³´ ìˆ˜ì • ==========
        const openEditHealthModal = (e, type) => {
            e.stopPropagation();
            currentHealthType = type;
            const healthInfo = JSON.parse(localStorage.getItem('healthInfo'));
            const titles = { wash: 'ğŸ§¼ ì† ì”»ê¸°', nutrition: 'ğŸ¥— ì˜ì–‘ ê´€ë¦¬', exercise: 'ğŸƒ ìš´ë™ê³¼ íœ´ì‹' };
            document.getElementById('editHealthTitle').textContent = titles[type] + ' ìˆ˜ì •';
            document.getElementById('editHealthContent').value = healthInfo[type];
            document.getElementById('editHealthModal').style.display = 'block';
        };

        const closeEditHealthModal = () => {
            document.getElementById('editHealthModal').style.display = 'none';
            currentHealthType = null;
        };

        const handleEditHealth = (e) => {
            e.preventDefault();
            const healthInfo = JSON.parse(localStorage.getItem('healthInfo'));
            healthInfo[currentHealthType] = document.getElementById('editHealthContent').value;
            localStorage.setItem('healthInfo', JSON.stringify(healthInfo));

            const contentIds = { wash: 'washContent', nutrition: 'nutritionContent', exercise: 'exerciseContent' };
            document.getElementById(contentIds[currentHealthType]).textContent = healthInfo[currentHealthType];

            closeEditHealthModal();
            alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        };

        // ========== ì§ˆì˜ì‘ë‹µ ==========
        const handlePostSubmit = (e) => {
            e.preventDefault();
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;

            const qnaList = JSON.parse(localStorage.getItem('qnaList'));
            qnaList.push({
                id: Date.now(),
                title,
                content,
                author: currentUser.name,
                type: currentUser.type,
                date: new Date().toLocaleDateString('ko-KR'),
                comments: []
            });

            localStorage.setItem('qnaList', JSON.stringify(qnaList));
            closePostModal();
            loadQNA();
            alert('ì§ˆë¬¸ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
        };

        const handleCommentSubmit = (e) => {
            e.preventDefault();
            const text = document.getElementById('commentText').value;
            const qnaList = JSON.parse(localStorage.getItem('qnaList'));
            const post = qnaList.find(p => p.id === currentPostId);

            if (post) {
                post.comments.push({
                    id: Date.now(),
                    author: currentUser.name,
                    type: currentUser.type,
                    text,
                    date: new Date().toLocaleDateString('ko-KR')
                });
                localStorage.setItem('qnaList', JSON.stringify(qnaList));
            }

            closeCommentModal();
            loadQNA();
            alert('ëŒ“ê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
        };

        const loadQNA = () => {
            const qnaList = JSON.parse(localStorage.getItem('qnaList'));
            let html = '';

            if (qnaList.length === 0) {
                html = '<p style="text-align: center; color: #999; padding: 40px;">ì•„ì§ ì§ˆë¬¸ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ì§ˆë¬¸ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</p>';
            } else {
                qnaList.reverse().forEach(post => {
                    const typeBadge = {
                        'admin': 'ğŸ‘‘',
                        'student': 'ğŸ‘¤',
                        'parent': 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§'
                    }[post.type] || '';

                    html += `
                        <div class="post-item">
                            <div class="post-title">${post.title}</div>
                            <div class="post-author">${typeBadge} ${post.author} | ${post.date}</div>
                            <div class="post-content">${post.content}</div>
                            <button class="btn" style="background: #667eea; color: white; padding: 5px 10px; font-size: 0.9rem; margin-top: 10px;" onclick="openCommentModal(${post.id})">ğŸ’¬ ëŒ“ê¸€ ë‹¬ê¸°</button>
                            <div style="margin-top: 15px;">
                                ${post.comments.map(comment => `
                                    <div class="comment">
                                        <div class="comment-author">${comment.author} (${comment.date})</div>
                                        <div class="comment-text">${comment.text}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                });
            }

            document.getElementById('qnaList').innerHTML = html;
        };

        // ========== ê´€ë¦¬ì íŒ¨ë„ ==========
        const switchAdminTab = (tab) => {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (tab === 'approval') {
                document.getElementById('approvalTab').style.display = 'block';
                document.getElementById('usersTab').style.display = 'none';
                document.getElementById('contentTab').style.display = 'none';
                loadPendingUsers();
            } else if (tab === 'users') {
                document.getElementById('approvalTab').style.display = 'none';
                document.getElementById('usersTab').style.display = 'block';
                document.getElementById('contentTab').style.display = 'none';
                loadApprovedUsers();
            } else {
                document.getElementById('approvalTab').style.display = 'none';
                document.getElementById('usersTab').style.display = 'none';
                document.getElementById('contentTab').style.display = 'block';
            }
        };

        const loadPendingUsers = () => {
            const pendingUsers = JSON.parse(localStorage.getItem('pendingUsers'));
            let html = '';

            if (pendingUsers.length === 0) {
                html = '<p style="text-align: center; color: #999; padding: 30px;">ëŒ€ê¸° ì¤‘ì¸ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
            } else {
                pendingUsers.forEach((user, index) => {
                    const typeLabel = {
                        'student': 'ğŸ‘¤ í•™ìƒ',
                        'parent': 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ í•™ë¶€ëª¨',
                        'admin': 'ğŸ‘‘ ê´€ë¦¬ì'
                    }[user.type] || user.type;

                    html += `
                        <div class="approval-item">
                            <div class="approval-info">
                                <div class="approval-name">${user.name}</div>
                                <div class="approval-email">${user.email}</div>
                                <span class="approval-type">${typeLabel}</span>
                            </div>
                            <div class="approval-actions">
                                <button class="btn-small btn-approve" onclick="approveUser(${index})">âœ“ ìŠ¹ì¸</button>
                                <button class="btn-small btn-reject" onclick="rejectUser(${index})">âœ• ê±°ë¶€</button>
                            </div>
                        </div>
                    `;
                });
            }

            document.getElementById('pendingList').innerHTML = html;
        };

        const loadApprovedUsers = () => {
            const users = JSON.parse(localStorage.getItem('users'));
            const adminUser = currentUser;
            let html = '';

            // ìì‹ ì„ ì œì™¸í•œ ë‹¤ë¥¸ ì‚¬ìš©ìë§Œ í‘œì‹œ
            const otherUsers = users.filter(u => u.id !== adminUser.id && u.status === 'approved');

            if (otherUsers.length === 0) {
                html = '<p style="text-align: center; color: #999; padding: 30px;">ê°€ì…í•œ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
            } else {
                otherUsers.forEach((user, index) => {
                    const typeLabel = {
                        'student': 'ğŸ‘¤ í•™ìƒ',
                        'parent': 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ í•™ë¶€ëª¨',
                        'admin': 'ğŸ‘‘ ê´€ë¦¬ì'
                    }[user.type] || user.type;

                    const studentInfo = user.studentId ? `<div class="approval-email" style="margin-top: 5px;">ğŸ“š ${user.studentId}</div>` : '';

                    html += `
                        <div class="approval-item">
                            <div class="approval-info">
                                <div class="approval-name">${user.name}</div>
                                <div class="approval-email">${user.email}</div>
                                ${studentInfo}
                                <span class="approval-type">${typeLabel}</span>
                            </div>
                            <div class="approval-actions">
                                <button class="btn-small btn-reject" onclick="deleteUserByAdmin(${user.id})" style="background: #e74c3c;">ğŸ—‘ï¸ ì‚­ì œ</button>
                            </div>
                        </div>
                    `;
                });
            }

            document.getElementById('usersList').innerHTML = html;
        };

        const approveUser = (index) => {
            const pendingUsers = JSON.parse(localStorage.getItem('pendingUsers'));
            const users = JSON.parse(localStorage.getItem('users'));
            const user = pendingUsers[index];

            user.status = 'approved';
            users.push(user);

            pendingUsers.splice(index, 1);
            localStorage.setItem('pendingUsers', JSON.stringify(pendingUsers));
            localStorage.setItem('users', JSON.stringify(users));

            loadPendingUsers();
            alert(`${user.name}ë‹˜ì˜ íšŒì›ê°€ì…ì„ ìŠ¹ì¸í–ˆìŠµë‹ˆë‹¤.`);
        };

        const rejectUser = (index) => {
            const pendingUsers = JSON.parse(localStorage.getItem('pendingUsers'));
            const user = pendingUsers[index];

            pendingUsers.splice(index, 1);
            localStorage.setItem('pendingUsers', JSON.stringify(pendingUsers));

            loadPendingUsers();
            alert(`${user.name}ë‹˜ì˜ íšŒì›ê°€ì…ì„ ê±°ë¶€í–ˆìŠµë‹ˆë‹¤.`);
        };

        const deleteUserByAdmin = (userId) => {
            if (confirm('ì´ ì‚¬ìš©ìë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                const users = JSON.parse(localStorage.getItem('users'));
                const userIndex = users.findIndex(u => u.id === userId);
                
                if (userIndex > -1) {
                    const deletedUser = users[userIndex];
                    users.splice(userIndex, 1);
                    localStorage.setItem('users', JSON.stringify(users));
                    loadApprovedUsers();
                    alert(`${deletedUser.name}ë‹˜ì˜ ê³„ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
                }
            }
        };

        // ========== íšŒì›íƒˆí‡´ ==========
        const openDeleteAccountModal = () => {
            document.getElementById('deleteAccountModal').style.display = 'block';
        };

        const closeDeleteAccountModal = () => {
            document.getElementById('deleteAccountModal').style.display = 'none';
        };

        const confirmDeleteAccount = () => {
            const users = JSON.parse(localStorage.getItem('users'));
            const userIndex = users.findIndex(u => u.id === currentUser.id);

            if (userIndex > -1) {
                const userName = users[userIndex].name;
                users.splice(userIndex, 1);
                localStorage.setItem('users', JSON.stringify(users));
                
                currentUser = null;
                localStorage.removeItem('currentUser');
                closeDeleteAccountModal();
                updateUI();
                showHome();
                alert(`${userName}ë‹˜ì˜ ê³„ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ë™ì•ˆ ì´ìš©í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!`);
            }
        };

        // ========== í˜ì´ì§€ ì „í™˜ ==========
        const showHome = () => {
            document.getElementById('mainContent').classList.remove('hidden');
            document.getElementById('noticePage').classList.add('hidden');
            document.getElementById('qnaPage').classList.add('hidden');
            document.getElementById('adminPanel').classList.add('hidden');
            loadHomeContent();
        };

        const showNotice = () => {
            document.getElementById('mainContent').classList.add('hidden');
            document.getElementById('noticePage').classList.remove('hidden');
            document.getElementById('qnaPage').classList.add('hidden');
            document.getElementById('adminPanel').classList.add('hidden');
            loadNotice();
        };

        const loadNotice = () => {
            const notice = JSON.parse(localStorage.getItem('notice'));
            let html = `<div class="post-item">
                <div class="post-title">${notice.title}</div>
                <div class="post-author">ğŸ“¢ ê³µì§€ì‚¬í•­</div>
                <div class="post-content">${notice.content}</div>
            </div>`;
            document.getElementById('noticeList').innerHTML = html;
        };

        const showQNA = () => {
            document.getElementById('mainContent').classList.add('hidden');
            document.getElementById('noticePage').classList.add('hidden');
            document.getElementById('qnaPage').classList.remove('hidden');
            document.getElementById('adminPanel').classList.add('hidden');
            loadQNA();
        };

        const showAdminPanel = () => {
            document.getElementById('mainContent').classList.add('hidden');
            document.getElementById('noticePage').classList.add('hidden');
            document.getElementById('qnaPage').classList.add('hidden');
            document.getElementById('adminPanel').classList.remove('hidden');
            loadPendingUsers();
        };

        const loadHomeContent = () => {
            const notice = JSON.parse(localStorage.getItem('notice'));
            const healthInfo = JSON.parse(localStorage.getItem('healthInfo'));
            document.getElementById('noticePreview').textContent = notice.content;
            document.getElementById('washContent').textContent = healthInfo.wash;
            document.getElementById('nutritionContent').textContent = healthInfo.nutrition;
            document.getElementById('exerciseContent').textContent = healthInfo.exercise;
        };

        // ========== Google ê°€ì… ê´€ë ¨ ì¶”ê°€ í•¨ìˆ˜ ==========
        let tempGoogleData = null;

        const handleGoogleSignupClick = () => {
            // Google One Tap í”„ë¡¬í”„íŠ¸ í‘œì‹œ
            google.accounts.id.prompt((notification) => {
                if (notification.isNotDisplayed() || notification.isSkippedMoment()) {
                    console.log("Google One Tap not displayed, waiting for user interaction");
                }
            });
        };

        const submitGoogleSignup = () => {
            const selectedType = document.querySelector('input[name="googleAccountType"]:checked').value;
            const users = JSON.parse(localStorage.getItem('users'));

            const newUser = {
                id: Date.now(),
                name: tempGoogleData.name,
                email: tempGoogleData.email,
                userId: tempGoogleData.email.split('@')[0],
                password: 'GOOGLE_AUTH_USER',
                type: selectedType,
                status: 'approved'
            };

            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            currentUser = newUser;
            localStorage.setItem('currentUser', JSON.stringify(newUser));

            document.getElementById('googleTypeModal').style.display = 'none';
            closeSignupModal();
            updateUI();
            alert(`Google ê³„ì •(${tempGoogleData.name}ë‹˜)ìœ¼ë¡œ ê°€ì… ë° ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤!`);
            tempGoogleData = null;
        };

        // ========== ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ==========
        window.onclick = (event) => {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        };

        // ========== ì´ˆê¸°í™” ==========
        window.onload = function () {
            try {
                // Google Login ì´ˆê¸° ì„¤ì •
                // âš ï¸ ì¤‘ìš”: ì•„ë˜ CLIENT_IDë¥¼ ìì‹ ì˜ Google Cloud Console Client IDë¡œ ë³€ê²½í•˜ì„¸ìš”!
                // https://console.cloud.google.com â†’ APIs ë° ì„œë¹„ìŠ¤ â†’ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ì—ì„œ í™•ì¸
                const CLIENT_ID = "YOUR_GOOGLE_CLIENT_ID_HERE";
                
                console.log("ğŸš€ ë°°í¬ìš© Google OAuth í™œì„±í™”");
                console.log("Client ID:", CLIENT_ID);
                
                // ë°°í¬ í™˜ê²½: ì‹¤ì œ Google OAuth ì‚¬ìš©
                google.accounts.id.initialize({
                    client_id: CLIENT_ID,
                    callback: handleCredentialResponse,
                    auto_select: false
                });

                // ë¡œê·¸ì¸ ëª¨ë‹¬ì˜ êµ¬ê¸€ ë²„íŠ¼ ë Œë”ë§
                google.accounts.id.renderButton(
                    document.getElementById("googleLoginBtn"),
                    { 
                        theme: "outline", 
                        size: "large", 
                        width: "100%",
                        text: "signin_with"
                    }
                );

                // íšŒì›ê°€ì… í˜ì´ì§€ì˜ ì»¤ìŠ¤í…€ Google ë²„íŠ¼
                const googleSignupBtn = document.getElementById("googleSignupBtn");
                if (googleSignupBtn) {
                    const signupButton = googleSignupBtn.querySelector('button');
                    if (signupButton) {
                        signupButton.onclick = function(e) {
                            e.preventDefault();
                            handleGoogleSignupClick();
                            return false;
                        };
                    }
                }

                console.log("âœ… Google OAuth ì´ˆê¸°í™” ì™„ë£Œ");
            } catch (error) {
                console.error("âŒ Google API initialization error:", error);
                alert("Google OAuth ì´ˆê¸°í™” ì‹¤íŒ¨\n\ní™•ì¸ì‚¬í•­:\n1. Client IDê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸\n2. Google Cloud Consoleì—ì„œ ë„ë©”ì¸ì´ ë“±ë¡ë˜ì—ˆëŠ”ì§€ í™•ì¸\n3. ë°°í¬ ë„ë©”ì¸: https://yourdomain.com");
            }
        };

        // ========== Google ë¡œê·¸ì¸ í•¸ë“¤ëŸ¬ ==========
        function handleCredentialResponse(response) {
            try {
                console.log("Google login successful!");
                
                // JWT ë””ì½”ë”© (UTF-8 ëŒ€ì‘)
                const base64Url = response.credential.split('.')[1];
                const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
                const jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {
                    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
                }).join(''));

                const payload = JSON.parse(jsonPayload);
                console.log("Google User Data:", payload);

                const email = payload.email;
                const name = payload.name;
                const users = JSON.parse(localStorage.getItem('users'));

                // ê¸°ì¡´ ì‚¬ìš©ì í™•ì¸
                let user = users.find(u => u.email === email);

                if (!user) {
                    // êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ì²« ë¡œê·¸ì¸ ì‹œ ê³„ì • ìœ í˜• ì„ íƒ ëª¨ë‹¬ í‘œì‹œ
                    console.log("New Google user - showing account type selection");
                    tempGoogleData = { name, email };
                    document.getElementById('googleTypeModal').style.display = 'block';
                    return;
                } else if (user.status === 'pending') {
                    alert('âŒ íšŒì›ê°€ì…ì´ ì•„ì§ ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤.\nê´€ë¦¬ìì˜ ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.');
                    return;
                } else if (user.status === 'approved') {
                    console.log("Existing Google user - logging in");
                    alert(`âœ… ${name}ë‹˜, Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤!`);
                    currentUser = user;
                    localStorage.setItem('currentUser', JSON.stringify(user));
                    closeLoginModal();
                    closeSignupModal();
                    updateUI();
                    showHome();
                }
            } catch (error) {
                console.error("Google login error:", error);
                alert("âŒ Google ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\n\n" + error.message);
            }
        }

        updateUI();
        loadHomeContent();
    </script>
</body>

</html>